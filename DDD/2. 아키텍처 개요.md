## 네 개의 영역

- 크게 표현 - 응용 - 도메인 - 인프라로 구성됨
- 기존의 구조와 달랐던 점은 응용 - 도메인이다.
  - 기존의 Service 로직을 응용-도메인으로 나누는데
  - 사용자에게 제공할 기능을 응용에 만들고 이를 도메인 모델의 메서드로 구성한다.
  - 이렇게 구성하면 무엇이 좋은가?
    - 도메인 모델에 관련 메서드가 있으니 이해가 쉬울 것 같다. Ex) order.cancel()





## 계층 구조 아키텍처

- 위에서 설명했듯 계층형 구조이고 하위 계층에만 의존할 수 있음
- 단, 글쓴이는 응용 - 인프라 의존과 같이 유연하게 적용할 수 있다고 본다
- 계층 구조의 특성상 모든 영역은 인프라에 종속된다.
  - 이 경우 문제점
    - 인프라를 제외하고 테스트를 진행하기 어려움.
    - 변경이 어렵다(??? - 인프라 코드가 연동되기 쉬움)
  - 해결책은 DIP?





## DIP

- 상위 계층에 Interface에 의존하게 한다면 위 문제들이 사라진다.
- 기존에 알던 DIP의 장점을 생각하면 된다.
- 주의 사항
  - inerface는 고수준 모듈의 관점에서 도출한다. (이용 객체의 관점)
- DIP를 적용할 경우 인프라 영역은 응용 혹은 도메인 영역에 의존하게 되어 해당 영역에 영향을 주지 못한다. (영향을 받게 된다.)





## 도메인 영역의 주요 구성요소

- Entity
- Value
- Aggregate
- Repository
- Domain Service



### Entity / Value

- DB 테이블 Entity와 도메인 모델의 Entity는 다르다
  - 도메인 모델의 Entity는 데이터와 도메인 기능을 함께 제공한다.
  - 도메인 모델의 Entity는 두 개 이상의 데이터가 개념적으로 하나인 Value타입을 이용해서 표현할 수 있다.



### Aggregate

- 관련 객체를 하나로 묶은 군집
- 군집에 속한 객체를 관리하는 Root Entity를 가진다.
  - Root Entity는 애그리거트가 구현해야 할 기능을 제공한다.





### Repository

- 물리 저장소에 도메인 객체를 보관하기 위한 역할
- 애그리거트 단위로 도메인 객체를 저장하고 조회하는 기능을 정의한다.
  - 애그리거트 저장/조회 등..