## 도메인이란?

- 도메인이란 SW로 해결하고자 하는 영역을 뜻한다.
- 크게는 이커머스를 하나의 도메인으로 볼 수 있고
- 하위 도메인으로는 구매, 결제, 배송 등등으로 나눌 수도 있다.
- 내가 이 책을 통해 궁금한 점 또한 도메인을 어떤 단위로 나눠야 하는가에 대한 해답이다.



## 도메인 전문가와 개발자 간 지식 공유

- 코딩 이전에 요구사항을 이해하는 것이 중요함을 강조한다.
- 요구사항을 정확히 이해하기 위한 방법으로 개발자와 전문가의 대화를 권한다.



## 도메인 모델

- 도메인 모델은 특정 도메인을 개념적으로 표현한 것
  - 도메인이 제공하는 기능과 주요 데이터로 구성됨 - 객체 모델이 적합하다.
  - 단, 다양한 방식으로 도메인 모델을 표현할 수 있음. 즉, 표현 방식은 중요하지 않다



## 도메인 모델 패턴

- 아키텍처 상의 도메인 계층을 객체 지향 기법으로 구현하는 패턴

- 도메인 계층은 도메인의 핵심 규칙을 구현한다.

- 배송지 변경 가능 로직이 어디에 구현되어 있어야 할까?

  - 

    ```java
    // OrderState 변경이 가능한지 확인하는 메서드가 OrderState에 있다
    
    public class Order{
      private OrderState state;
      private ShippingInfo shippingInfo;
      
      public void changeShippingInfo(ShippingInfo newShippingInfo){
        if(!state.isShippingChangeable()){
          throw new IllegalStateException("can't change shipping in "+ state);
        }
        this.shippingInfo = new ShippingInfo;
      }
    }
    
    public enum OrderState{
        PAYMENT_WAITING{
            public boolean isShippingChangeable(){
                return true;
            }
        },
        SHIPPED, DELIVERING, DELIVERY_COMPLETED;
    
        
        public boolean isShippingChangeable(){
            return false;
        }
    }
    ```

  - 

    ```java
    // OrderState 변경이 가능한지 확인하는 메서드가 Order에 있다
    
    public class Order{
      private OrderState state;
      private ShippingInfo shippingInfo;
      
      public void changeShippingInfo(ShippingInfo newShippingInfo){
        if(!state.isShippingChangeable()){
          throw new IllegalStateException("can't change shipping in "+ state);
        }
        this.shippingInfo = new ShippingInfo;
      }
      
      private boolean isShippingChangeable(){
        if(state == OrderState.PAYMENT_WAITING)
          return true;
        return false;
      }
    }
    
    public enum OrderState{
        PAYMENT_WAITING, SHIPPED, DELIVERING, DELIVERY_COMPLETED;
    }
    ```

  - 현재 로직에서는 어디에 있든 상관이 없다.

  - 단, 배송지 변경 가능 여부를 Order 내에 있는 더 많은 정보들을 바탕으로 판별한다면 Order 내부에 있어야 함.

  - 만약 이러한 부분에서 요구사항 변경이 필요하다면 Order에 구현되어 있는 쪽이 더 유연하게 코드를 변경할 수 있지 않을까?



## 도메인 모델 도출

- 도메인을 모델링하기 위해서는 아래 항목을 `요구사항`에서 찾는 것에서 출발한다.
  - 핵심 구성요소
  - 규칙
  - 기능

